<!DOCTYPE html>
<html>

<head>
  <title>FishingIsFun</title>
  <link rel="stylesheet" href="options.css">
  <script type="text/javascript">
    var jsalarm = {
      padfield: function (f) {
        return (f < 10) ? "0" + f : f
      },
      showcurrenttime: function () {
        var dateobj = new Date()
        var ct = this.padfield(dateobj.getHours()) + ":" + this.padfield(dateobj.getMinutes()) + ":" + this.padfield(dateobj.getSeconds())
        this.ctref.innerHTML = ct
        this.ctref.setAttribute("title", ct)
        if (typeof this.hourwake != "undefined") { //if alarm is set
          if (this.ctref.title == (this.hourwake + ":" + this.minutewake + ":" + this.secondwake)) {
            clearInterval(jsalarm.timer)
            window.location = document.getElementById("musicloc").value
          }
        }
      },
      init: function () {
        var dateobj = new Date()
        this.ctref = document.getElementById("jsalarm_ct")
        this.submitref = document.getElementById("submitbutton")
        this.submitref.onclick = function () {
          jsalarm.setalarm()
          this.value = "Alarm Set"
          this.disabled = true
          return false
        }
        this.resetref = document.getElementById("resetbutton")
        this.resetref.onclick = function () {
          jsalarm.submitref.disabled = false
          jsalarm.hourwake = undefined
          jsalarm.hourselect.disabled = false
          jsalarm.minuteselect.disabled = false
          jsalarm.secondselect.disabled = false
          return false
        }
        var selections = document.getElementsByTagName("select")
        this.hourselect = selections[0]
        this.minuteselect = selections[1]
        this.secondselect = selections[2]
        for (var i = 0; i < 60; i++) {
          if (i < 24) //If still within range of hours field: 0-23
            this.hourselect[i] = new Option(this.padfield(i), this.padfield(i), false, dateobj.getHours() == i)
          this.minuteselect[i] = new Option(this.padfield(i), this.padfield(i), false, dateobj.getMinutes() == i)
          this.secondselect[i] = new Option(this.padfield(i), this.padfield(i), false, dateobj.getSeconds() == i)

        }
        jsalarm.showcurrenttime()
        jsalarm.timer = setInterval(function () { jsalarm.showcurrenttime() }, 1000)
      },
      setalarm: function () {
        this.hourwake = this.hourselect.options[this.hourselect.selectedIndex].value
        this.minutewake = this.minuteselect.options[this.minuteselect.selectedIndex].value
        this.secondwake = this.secondselect.options[this.secondselect.selectedIndex].value
        this.hourselect.disabled = true
        this.minuteselect.disabled = true
        this.secondselect.disabled = true
      }
    }
  </script>
</head>
<body>
  <h1>Settings</h1>
  <div class="section">
      <h2>Block Sites</h2>
      <textarea id="textarea" rows="10" cols="30" spellcheck="false"></textarea>
      <br>
      <button id="save">Save</button>
      <strong>Enabled?</strong><input id="checkbox" type="checkbox">
  </div>
  <div class="section">
    <h2>Set a Reminder</h2>
    <!-- CURRENT TIME -->
    <div id="ctime">
      <h1 class="header">Current Time</h1>
      <div class="square">
        <div class="digits" id="chr">00</div>
        <div class="text">HR</div>
      </div>
      <div class="square">
        <div class="digits" id="cmin">00</div>
        <div class="text">MIN</div>
      </div>
      <div class="square">
        <div class="digits" id="csec">00</div>
        <div class="text">SEC</div>
      </div>
    </div>
    
    <!-- SET ALARM -->
    <div id="tpick">
      <h1 class="header">
        Set Alarm
      </h1>
      <div id="tpick-h"></div>
      <div id="tpick-m"></div>
      <div id="tpick-s"></div>
      <div>
        <button type="button" value="Set" id="tset">Set</button>
        <button type="button" value="Reset" id="treset" disabled>Reset</button>
      </div>
    </div>
    
    <!-- (C) ALARM SOUND -->
    <audio id="alarm-sound" loop>
      <source src="wake-up-sound.mp3" type="audio/mp3">
    </audio>
  </div>
  <div class="section">
    <div id="myDIV" class="header">
      <h2>My To Do List</h2>
      <input type="text" id="myInput" placeholder="Title...">
      <span id="newElement" class="addBtn">Add</span>
    </div>
    <ul id="myUL">
      <li>Example task</li>
    </ul>
  </div>

  <div>
    <h2>Set a Reminder</h2>
    <form>
      <label for="fname">In x minutes:</label><br>
      <input type="text" id="mins" name="mins" value="ex. 45"><br>
      <input type="submit" value="Submit">
    </form>
  </div>

  <script src="options.js"></script>
  <script>
    jsalarm.init()
  </script>
</body>

</html>